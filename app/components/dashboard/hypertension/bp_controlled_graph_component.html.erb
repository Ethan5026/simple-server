<div id="bp-controlled" class="d-lg-flex w-lg-50 pr-lg-2">
  <%= render Dashboard::Card::GraphComponent.new(id: "controlledPatientsTrend", data: graph_data, period: period) do |c| %>
    <%= c.title(title: "BP controlled".html_safe, subtitle: t("bp_controlled_copy.reports_card_subtitle")) do |title| %>
      <%= title.tooltip({ "Numerator" => t("bs_below_200_copy.numerator"),
                          "Denominator" => t(denominator_copy, region_name: region.name) }) %>
      <%= title.ltfu_toggle(id: 'controlledGraphLtfuToggle', enabled: with_ltfu) %>
    <% end %>

    <% c.summary do %>
      <div class="mb-12px d-lg-flex align-lg-center">
        <p class="c-print-black c-green-dark graph-percent fs-28px"
           data-key="controlRate" data-format="percentage">
        </p>
        <div>
          <p class="m-0px c-black">
            <span data-key="controlledPatients" data-format="numberWithCommas"></span>
            patients with controlled BP from
            <span data-key="startDate"></span>
            to
            <span data-key="endDate"></span>
          </p>
          <p class="m-0px c-grey-dark c-print-black">
            of <span data-key="adjustedPatientCounts" data-format="numberWithCommas"></span>
            patients registered till
            <span data-key="registrationDate"></span>
          </p>
        </div>
      </div>
    <% end %>
  <% end %>
</div>
